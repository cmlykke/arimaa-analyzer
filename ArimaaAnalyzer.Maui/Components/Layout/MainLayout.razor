@inherits LayoutComponentBase
@inject IJSRuntime JS

<div class="page">
    <NavMenu />
    <main>
        <article class="content px-4">
            @Body
        </article>
    </main>
</div>

<nav @ref="titlebar" class="titlebar">
    <div class="titlebar-inner">
        <span>Arimaa Analyzer</span>
        @if (OperatingSystem.IsWindows())
        {
            <div class="titlebar-buttons">
                <button @onclick="WindowService.Minimize">−</button>
                <button @onclick="WindowService.ToggleMaximize">□</button>
                <button @onclick="WindowService.Close">×</button>
            </div>
        }
    </div>
</nav>

@code {
    ElementReference titlebar;

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender && OperatingSystem.IsWindows())
            await JS.InvokeVoidAsync("makeNavbarDraggable", titlebar);
    }
}